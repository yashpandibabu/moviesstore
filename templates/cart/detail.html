{% extends "base.html" %}
{% block content %}
  <h2>Your cart</h2>
  {% if items %}
    <ul class="list-group mb-3">
      {% for it in items %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <div class="fw-semibold">{{ it.movie.title }}</div>
            <div class="small">${{ it.movie.price }} Ã— {{ it.quantity }}</div>
          </div>
          <div>
            <span class="me-3 fw-semibold">${{ it.line_total }}</span>
            <a class="btn btn-sm btn-outline-primary" href="/cart/add/{{ it.movie.id }}/">+</a>
            <a class="btn btn-sm btn-outline-secondary" href="/cart/remove/{{ it.movie.id }}/">-</a>
          </div>
        </li>
      {% endfor %}
    </ul>
    <p class="fs-5"><strong>Total: ${{ total }}</strong></p>
    <p>
      <a class="btn btn-outline-danger" href="/cart/clear/">Clear cart</a>
      {% if user.is_authenticated %}
        <a class="btn btn-success ms-2" href="/checkout/">Checkout</a>
      {% else %}
        <a class="btn btn-warning ms-2" href="/accounts/login/?next=/cart/">Log in to checkout</a>
      {% endif %}
    </p>
  {% else %}
    <p>Your cart is empty.</p>
  {% endif %}
  <p class="mt-3"><a href="/movies/">Continue shopping</a></p>
{% endblock %}